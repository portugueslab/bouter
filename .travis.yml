# Config file for automatic testing at travis-ci.com

language: python
python:
  - 3.8
  - 3.7
  - 3.6

# Command to install dependencies, e.g. pip install -r requirements.txt --use-mirrors
install:
- pip install -U tox-travis

addons:
  apt_packages:
    - pandoc

script:
- tox

after_success:
- python3 --version
- pip install codecov
- codecov
- pip install Sphinx==3.0.3
- pip install sphinx_rtd_theme==0.4.3
- pip install .  # Seems to be required for the apidocs
- pip install nbsphinx
- pip install pandoc
- pip install ipykernel
- cd docs
- sphinx-apidoc ../bouter -o ./
- make html
- cd ..

# Assuming you have installed the travis-ci CLI tool, after you
# create the Github repo and add it to Travis, run the
# following command to finish PyPI deployment setup:
# $ travis encrypt --add deploy.password
deploy:
  - provider: pages
    skip_cleanup: true
    keep_history: true
    github_token:
        secure: "5XvJ2VWz+EY4ldj7rKIYsVzn9F7P76dkIOqdRs/NiDJzv2OGwksGNGEDEWJJKH3a23Lnqkmo2k+5/ZF4e4nukG3nNWGhcyMv3SUTPwA60fUvhpwyZt6VuM2qGUR1/71mMBHuOPW1lKM6cGcryyVMN0Qdbgr+C/9YMQltxkt0xN/e9Tdypd69xvuwJtfjWQ3a7MuoKkLpdYs2+RviItooZHH/sMGmYXA03n7YIc8rg0IC8SvSEFjjyPOyN60gSh6msTM9fPkvN3SjCkvkI0DXqYRHd4og3a9cjVq/3N4ut+N86xJHfAGD3Z+kkBHy04Wnic2867slRzGWzXaymyQK8TKsXMVmeXOFhgqyWBzIzjeB9s3nh7iFla6BArgknOoST5mUL7cy5BN6iI4V81sQVM0AGkhf0qJWRLsntg0KFRpBfGvei8TOb2P3k+TVkOJCeH3WKdRdstbh72eFJvlQvU3377Anma7j02hCm45pJ0tiJCrs5L8eKlxTaMgLAmNDE/UTMw79mRhChrI8Bu174Wym6m5Toxo8YyAqf4ZCIx5fT0CHTUFGkDkncEyGhWReOuyZmxBGrpFT0feDfeym2hT5RErfMUxrpzrr8Y9lInQDgDYirx4Jdf2dN1gT8sQowGBHsc0f7T7ir/yg1hJS8bzvj9PuDDtgHSgHMKsaE0s="
    on:
      python: 3.8
    local-dir: docs/_build/html

  - provider: pypi
    skip_cleanup: true
    distributions: sdist bdist_wheel
    user: __token__
    password:
        secure: "WF9apZHztLe8VjSF4t3lz9NmWfVOZl8082HXIm64MDj8QIhpFuQLBw9cMpZVf1nBXyuanJBwy5FTSXQxEYfqZSrzMkp5tb2S2JwygYYC1xfIILCRawJepWShsR8MCnS0YT12kgZ7esqVxjxjXN7oKrnF0DHHyNpsoNV/pY97L8J4a/Fs1Z1lwhUuotCE2EhK2jDNvl2jKofxmsf9oiTH5gtMHa8yfaRZURye3wjxDbtXK88qH1wxjUi1i0UGjnrzbpwP17CTggK0CjKj248oq7cRcPRC6Vj/NOfa1rLjrkIgY3PDVe2k/7wBuu0FM8VAoHIElGd4y0qwDg4lLn0gv0T3LWM7zzoOx+Uu8AXIu67p0ADV/bJzWL0jaTHBq7J7q6a1zMNCq550mr5m/phgIMr8JH9XwzvTFXsBMokxe1L9WDQ0B/pUFb5Kk5b8gAqQ4XBzFbZB/3cwbKSsEL99RKCwFnPg/GTqBDEWPTw7vv/mIrP/aLEHoCgo+RX5e7S809wgvgvtsFyw/3jXzlVtZxp8EMJCEvBU5hqyT1UNhFKvGSgaDu1jihi1CZyFJBE5iJy+r0O/wY+ckEisbcgtvG8w46hWBIR/6/CPuYxNJo6Dlt2I2PpTdMoaMiquKPh/ioV7WvdhezRHk1VTEnooIURrXtXOe+0t6RkwieNgzSk="
    on:
      tags: true
      branch: master
      python: 3.8
    skip_existing: true
    committer-from-gh: true
